# text-processor
This is an extensible text processing tool written in Rust

This is an attempt at making a text-based writing tool that is easier to use than Latex, more extensible than GNU roff and with less syntax than Markdown.

This project is very WIP. The base tool is almost complete, but all the external tooling required to make anything useful is far from being complete.

# What it does
This tool does two things:
 * expand macros by piping text to external binaries
 * send the result to a compiler (groff, pandoc, latex,...)

The only syntax to learn is how to feed text to a program:
```
.section: Introduction
  This is an introduction.
```

This code roughly means:
 * find an executable named "section"
 * run it with "Introduction" as a system (command-line) argument
 * pipe "This is an introduction." to its stdin
 * read the output generated by "section"
 * replace this code with its output

After applying this process until everything is processed, a target-specific (md, pdf, html, odt,...) binary will be ran with the entire text as its stdin, and generate the expected output.

# How it works
The main complexity is moved to binaries (or plain scripts) like "section", that are supposed to manage the low level components of the target compiler.
These executables are split into directories that are either specific to compilation targets, or libraries. There directories are declared when calling the compiler with this style of syntax:
```sh
cargo run -- {file} --lib {lib1},{lib2} --lib {lib3} --target pdf,md,html
```
(the first -- is used to indicate to cargo the actual arguments)

The external executables can also share data or configuration by using a data store that is generated during the compilation of the text file.
This allows using macros to configure the target compiler, for example.

Btw, using a bunch of completely unknown programs to manipulate text is probably a security nightmare. Almost as bad as running compiled proprietary code without looking at the source.


# Todo
Here is a summarized list of landmarks to reach:
* Main binary (~50%, the path manipulation and dynamic library linking is incomplete)
* Write a target to compile to markdown or ODT (0%) and essential libraries (0%)
* proof of concept: write an academic report (with features like table of contents or bibliography, using the data store)
* Optimize the replacement algorithm to scale with higher text lengths (200+ pages)
  (Currently, replacing a macro in a paragraph requires copying the entire book. Every time.)

